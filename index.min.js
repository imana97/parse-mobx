"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_desc,_value,_class,_mobx=require("mobx");Object.defineProperty(exports,"__esModule",{value:!0}),exports.ParseMobx=void 0;function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _applyDecoratedDescriptor(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(g){f[g]=d[g]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(g,h){return h(a,b,g)||g},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}(0,_mobx.configure)({enforceActions:"observed"});var ParseMobx=exports.ParseMobx=(_class=function(){function a(b){if(_classCallCheck(this,a),b.isNew())throw new Error("Only Saved Parse objects can be converted to ParseMobx objects.\n            not saved object: "+b.className);this._parseObj=b,this.id=b.id,this.attributes={createdAt:b.get("createdAt")};var c={};for(var d in b.attributes){var e=b.attributes[d];"ParseObjectSubclass"===e.constructor.name?this.attributes[d]=new a(e):"ParseObjectSubclass"===e.constructor.name?c[d]=e.map(function(f){return"ParseObjectSubclass"===f.constructor.name?a(f):f}):"ParseRelation"!==e.constructor.name&&"ParseACL"!==e.constructor.name&&"createdAt"!=d&&(c[d]=e)}(0,_mobx.extendObservable)(this.attributes,c)}return _createClass(a,[{key:"_checkDefined",value:function _checkDefined(b,c){if("undefined"==typeof this.attributes[b]){var d={};d[b]=c,(0,_mobx.extendObservable)(this.attributes,d)}}},{key:"_checkType",value:function _checkType(b,c){return this.attributes[b].constructor.name===c}},{key:"add",value:function add(b,c){return this._parseObj.add(b,c),this}},{key:"addAll",value:function addAll(b,c){return this._parseObj.addAll(b,c),this}},{key:"addAllUnique",value:function addAllUnique(b,c){var d=this;return this._checkDefined(b,[]),this._checkType(b,"Array")&&c.forEach(function(e){-1===d.attributes[b].indexOf(e)&&("ParseObjectSubclass"===e.constructor.name?d.attributes[b].push(new a(e)):d.attributes[b].push(e))}),this._parseObj.addAllUnique(b,c),this}},{key:"addUnique",value:function addUnique(b,c){return this._checkDefined(b,[]),this._checkType(b,"Array")&&-1===this.attributes[b].indexOf(c)&&("ParseObjectSubclass"===c.constructor.name?this.attributes[b].push(new a(c)):this.attributes[b].push(c)),this._parseObj.addUnique(b,c),this}},{key:"clear",value:function clear(){return this._parseObj.clear()}},{key:"clone",value:function clone(){return this._parseObj.clone()}},{key:"destroy",value:function destroy(b){this._parseObj.destroy(b)}},{key:"dirty",value:function dirty(b){return this._parseObj.dirty(b)}},{key:"dirtyKeys",value:function dirtyKeys(){return this._parseObj.dirtyKeys()}},{key:"equals",value:function equals(b){return this._parseObj.equals(b)}},{key:"escape",value:function escape(b){return this._parseObj.escape(b)}},{key:"existed",value:function existed(){return this._parseObj.existed()}},{key:"fetch",value:function fetch(b){var c=this;return new Promise(function(d,e){c._parseObj.fetch(b).then(function(f){return new a(f)}).catch(e)})}},{key:"fetchWithInclude",value:function fetchWithInclude(b,c){var d=this;return new Promise(function(e,f){d._parseObj.fetchWithInclude(b,c).then(function(g){return new a(g)}).catch(f)})}},{key:"get",value:function get(b){return this.attributes[b]}},{key:"getACL",value:function getACL(){return this._parseObj.getACL(arguments),this}},{key:"has",value:function has(b){return this._parseObj.has(b)}},{key:"increment",value:function increment(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this._checkDefined(b,0),this._checkType(b,"Number")&&(this.attributes[b]+=c),this._parseObj.increment(b,c)}},{key:"isNew",value:function isNew(){return!1}},{key:"isValid",value:function isValid(){return this._parseObj.isValid()}},{key:"newInstance",value:function newInstance(){return this._parseObj.newInstance()}},{key:"op",value:function op(b){return this._parseObj.op(b)}},{key:"relation",value:function relation(b){return this._parseObj.relation(b)}},{key:"remove",value:function remove(b,c){return this._checkDefined(b,[]),this._checkType(b,"Array")&&-1!==this.attributes[b].indexOf(c)&&this.attributes[b].splice(this.attributes[b].indexOf(c),1),this._parseObj.remove(b,c),this}},{key:"removeAll",value:function removeAll(b,c){var d=this;return this._checkDefined(b,[]),this._checkType(b,"Array")&&this._checkType(c,"Array")&&c.forEach(function(e){-1!==d.attributes[b].indexOf(e)&&d.attributes[b].splice(d.attributes[b].indexOf(e),1)}),this._parseObj.removeAll(b,c),this}},{key:"revert",value:function revert(){return this._parseObj.revert(),new a(this._parseObj)}},{key:"save",value:function save(b){var c=this;return new Promise(function(d,e){c._parseObj.save(b).then(function(){(0,_mobx.runInAction)(function(){return c.set("updatedAt",new Date().toISOString())}),d(c)}).catch(e)})}},{key:"set",value:function set(b,c,d){if("ParseRelation"===c.constructor.name)throw new Error("You can not add relations with set");if("ParseACL"===c.constructor.name)throw new Error("Please use setACL() instead");if("undefined"!=typeof this.attributes[b])this.attributes[b]="ParseObjectSubclass"===c.constructor.name?new a(c):c;else{var e={};e[b]=c,(0,_mobx.extendObservable)(this.attributes,e)}return this._parseObj.set(b,c,d),this}},{key:"setACL",value:function setACL(b,c){return this._parseObj.setACL(b,c),this}},{key:"toJSON",value:function toJSON(){return this._parseObj.toJSON()}},{key:"toPointer",value:function toPointer(){return this}},{key:"unset",value:function unset(b){return this._parseObj.unset(b),new a(this._parseObj)}},{key:"validate",value:function validate(b){return this._parseObj.validate(b)}},{key:"getParseObject",value:function getParseObject(){return this._parseObj}}],[{key:"toParseMobx",value:function toParseMobx(b){return"function"==typeof b?function(c){return b(new a(c))}:Array.isArray(b)?b.map(function(c){return new a(c)}):b?new a(b):null}},{key:"deleteListItem",value:function deleteListItem(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"id";b.splice(b.findIndex(function(e){return e[d]===c[d]}),1)}},{key:"updateListItem",value:function updateListItem(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"id";b[b.findIndex(function(e){return e[d]===c[d]})]=c}}]),a}(),_applyDecoratedDescriptor(_class.prototype,"addAllUnique",[_mobx.action],Object.getOwnPropertyDescriptor(_class.prototype,"addAllUnique"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"addUnique",[_mobx.action],Object.getOwnPropertyDescriptor(_class.prototype,"addUnique"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"increment",[_mobx.action],Object.getOwnPropertyDescriptor(_class.prototype,"increment"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"remove",[_mobx.action],Object.getOwnPropertyDescriptor(_class.prototype,"remove"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"removeAll",[_mobx.action],Object.getOwnPropertyDescriptor(_class.prototype,"removeAll"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"revert",[_mobx.action],Object.getOwnPropertyDescriptor(_class.prototype,"revert"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"save",[_mobx.action],Object.getOwnPropertyDescriptor(_class.prototype,"save"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"set",[_mobx.action],Object.getOwnPropertyDescriptor(_class.prototype,"set"),_class.prototype),_class);